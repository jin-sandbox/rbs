var https = require("https");
var DOMParser = require('xmldom').DOMParser;
function modulesAction(request,response,rbs){
	var options = {
		host:'github.com',
		port: 80,
		"user-agent":'nodejs',
		path: '/joyent/node/wiki/Modules'
	};
	
	https.get({ host: 'github.com', path: '/joyent/node/wiki/Modules' }, function(res) {
	  var buf = [];
	  res.on('data', function(d) {
			buf.push(d)
	  }).on('end', function(d) {
	  		var dom = new DOMParser().parseFromString(buf.toString(),'text/html');
	  		var content = dom.getElementById('wiki-body');
	  		var child = content.firstChild;
	  		while(!/ul/i.test(child.tagName)){
	  			content.removeChild(child);
	  			child = content.firstChild;
	  		}
	  		response.write(content+'');
			response.end();
	  });
	}).on('error', function(e) {
	  console.error(e);
	});
}
exports. modulesAction= modulesAction;
